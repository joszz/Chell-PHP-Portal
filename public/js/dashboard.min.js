"use strict";function initializePlugins(){$(".sysinfo, .hardware, .harddisks, .processes").phpsysinfo();$(".devices").devices();$(".transmission").transmission();$(".movies, .episodes, .albums, .couchpotato").gallery();$(".nowplaying").nowplaying();$(".sickrage").sickrage();$(".couchpotato").couchpotato();$(".motion").motion();speedtest=$(".speedtest").speedtest();opache=$(".opcache").opcache();$(".youless").youless();pihole=$(".pihole").pihole();var n=new Date;n.setSeconds(n.getSeconds()-Math.floor($("div.uptime").html()));$("div.uptime").tinyTimer({from:n,format:"%d days %0h:%0m:%0s"})}function initializeDashboardEventHandlers(){$(".toggle-collapse, .panel-heading h4").click(function(){var n=$(this).closest(".panel");n.find(".toggle-collapse:visible").length!==0&&(n.find(".toggle-collapse").toggleClass("fa-minus fa-plus"),n.find(".panel-body:eq(0)").toggleClass("hidden-xs"),n.hasClass("gallery")?n.css("height",n.find(".panel-body:eq(0)").hasClass("hidden-xs")?"auto":"379px"):n.hasClass("opcache")?opache.initializeChart():n.hasClass("pihole")&&pihole.initializeChart(),n.find(".tab-content").length||n.find(".list-group").toggleClass("hidden-xs"))});$("footer .toggle-all").click(function(){$(".fa-"+($(this).hasClass("fa-expand")?"plus":"minus")).trigger("click");$(this).hasClass("fa-expand")&&speedtest!==!1&&speedtest.initUI();$(this).toggleClass("fa-expand fa-compress")})}(function(n){n.fn.couchpotato=function(t){var i=n.extend({block:this,apiKey:this.data("couchpotato-apikey"),baseUrl:this.data("base-url"),couchpotatoBaseUrl:this.data("couchpotato-url")},t),r={initialize:function(){if(i.block.length!==0){i.block.find(".fa-sync").on("click",r.refresh);i.block.find(".fa-search").on("click",r.searchWantedMovies)}},refresh:function(){i.block.isLoading();i.block.find(".item").remove();n.ajax({url:r.url("media.list"),dataType:"json",success:function(t){n.each(t.movies,function(n,t){var r=i.block.find("a.clone").clone();r.removeClass("clone").addClass("item");r.attr({href:i.baseUrl+"couchpotato/movie/"+t._id,"data-fancybox":"couchpotato","data-type":"iframe",title:t.info.tagline});n===0&&r.removeClass("hidden_not_important");r.find(".title").html(t.title);r.find(".subtitle").html(t.info.tagline);r.css("background-image","url('"+t.info.images.poster+"')");r.attr("title",t.title);r.appendTo(i.block.find(".panel-body"))})},complete:function(){i.block.isLoading("hide")}})},searchWantedMovies:function(){showAlert("success","Initiating Couchpotato movie search");n.ajax({url:r.url("movie.searcher.full_search"),dataType:"json"})},url:function(n){return i.couchpotatoBaseUrl+"api/"+i.apiKey+"/"+n+"/"}};r.initialize()}})(jQuery),function(n){n.fn.devices=function(t){var i=n.extend({block:this,updateInterval:this.data("device-state-interval")*1e3,updateIntervalId:-1},t),r={initialize:function(){i.block.on("click",".fa-sync",function(){clearInterval(i.updateIntervalId);i.updateIntervalId=setInterval(function(){self.checkstates(self)},i.updateInterval);r.checkstates(i.block)});i.block.on("click",".btn-danger",function(){var t="Wake <span>"+n(this).closest("li").find("div:first").html().trim()+"<\/span>?";openConfirmDialog(t,[{mac:n(this).data("mac")}],function(){r.wol(n(this))})});i.block.on("click",".btn-success",function(){var t="Shutdown <span>"+n(this).closest("li").find("div:first").html().trim()+"<\/span>?";openConfirmDialog(t,[{"shutdown-user":n(this).data("shutdown-user"),"shutdown-password":n(this).data("shutdown-password"),ip:n(this).data("ip")}],function(){r.doShutdown(n(this))})});i.block.on("click",".webtemp",function(){n.getJSON("devices/webtemp/"+n(this).data("deviceid"),function(t){n.fancybox.open(t)})});r.checkstates()},checkstates:function(t){t=typeof t=="undefined"?this:t;var r=new Date;clearInterval(i.updateIntervalId);i.updateIntervalId=setInterval(function(){t.checkstates(t)},i.updateInterval);i.block.find(".devicestate").each(function(){var f=n(this),t=n(this).find("span.fa"),i=n(this).data("ip"),u=n("ul.nav li[data-ip='"+i+"'");u.find("a").bind("click",!1);n(this).removeClass("btn-danger btn-success");n(this).addClass("disabled");t.removeClass("fa-power-off");t.addClass("fa-sync fa-spin"),function(t,i,u,f){n.getJSON("devices/state/"+f+"/"+r.getTime(),"",function(n){u.removeClass("fa-sync fa-spin");u.addClass("fa-power-off");t.removeClass("disabled");t.data("shutdown-method")==="none"&&t.addClass("disabled");n.state?(i.removeClass("disabled"),t.parent().find(".hypervadmin").removeClass("disabled"),i.find("a").unbind("click",!1)):(i.addClass("disabled"),t.parent().find(".hypervadmin").addClass("disabled"));t.addClass("btn-"+(n.state?"success":"danger"))})}(f,u,t,i)})},wol:function(t){if(n.fancybox.close(),t.attr("id")==="confirm-yes"){var i=t.closest("div").find("h2 span").html().trim();n.get("devices/wol/"+t.closest("div").data("mac"),function(n){showAlert("success","Magic packet send to: "+n)}(i))}},doShutdown:function(t){if(n.fancybox.close(),t.attr("id")==="confirm-yes"){var i=t.closest("div"),u=i.data("shutdown-user"),f=i.data("shutdown-password"),e=i.data("ip"),r=i.closest("div").find("h2 span").html().trim();n.get("devices/shutdown/"+e+"/"+u+"/"+f,function(n){var t="danger",i="Shutdown command failed for: "+r;n==="true"&&(t="success",i="Shutdown command send to: "+r);showAlert(t,i)})}}};return r.initialize(),r}}(jQuery),function(n){n.fn.gallery=function(t){this.each(function(){var i=n.extend({block:n(this),rotateInterval:n(this).data("rotate-interval")*1e3,rotateIntervalId:-1},t),r={initialize:function(){i.rotateIntervalId=setInterval(function(){r.rotateGallery("right")},i.rotateInterval);i.block.find(".fa-chevron-left, .fa-chevron-right").click(function(){clearInterval(i.rotateIntervalId);r.rotateGallery(n(this).hasClass("fa-chevron-left")?"left":"right");i.rotateIntervalId=setInterval(function(){r.rotateGallery("right")},i.rotateInterval)})},rotateGallery:function(n){if(i.block.find(".panel-body:visible").length){var t=i.block.find(".item:visible").index(),r=n==="right"?1:-1,u=i.block.find(".item:eq("+(t+r)+")").length===1?t+r:0;t!==u&&i.block.find(".item:eq("+t+")").fadeOut("fast",function(){i.block.find(".item:eq("+u+")").fadeIn("fast").css("display","block")})}}};r.initialize()})}}(jQuery),function(n){n.fn.hypervadmin=function(t){var i=n.extend({block:this,vm:{stateEnabed:2,stateDisabed:3,toggleStateBaseURL:this.find("#vms").data("togglestate-baseurl")},sites:{stateEnabed:1,stateDisabed:3,toggleStateBaseURL:this.find("#sites").data("togglestate-baseurl")}},t),r={initialize:function(){if(i.block.length!==0){i.block.on("click",".togglestate:visible",function(){var t=n(this).closest(".panel").attr("id"),i=n(this).attr("href"),u=n(this).closest("tr").find("td:eq(1)").html();return openConfirmDialog("Are you sure?",[],function(){n.fancybox.close();n(this).attr("id")==="confirm-yes"&&r.toggleState(i,u,t)}),!1});i.block.find(".fa-sync").on("click",function(){switch(n(this).closest("a").attr("href")){case"#vms":r.refreshVMs(!0);break;case"#sites":r.refreshSites(!0)}})}},toggleState:function(t,u,f){i.block.isLoading();n.ajax({url:t,success:function(){showAlert("success","State toggled for "+(f==="vm"?"VM":"site")+": "+u);f==="vms"?r.refreshVMs():r.refreshSites()}})},refreshVMs:function(t){t=typeof t=="undefined"?!1:t;t&&i.block.isLoading();n.getJSON("getVMs",function(t){var r=i.block.find("#vms tbody");r.find("tr:not(.hidden)").remove();t.sort(function(n,t){return n.Name<t.Name?1:-1});n.each(t,function(n,t){var u=i.block.find("#vms tr.hidden").clone(),f=t.State===i.vm.stateEnabed?i.vm.stateDisabed:i.vm.stateEnabed;u.find(".name").html(t.Name);u.find(".load .percent").html(t.CPULoad+"%");u.find(".load .progress-bar").css("width",t.CPULoad+"%");u.find(".cores").html(t.CoresAmount);u.find(".ram").html(t.MemoryTotal+" "+t.MemoryAllocationUnits);u.find(".mac").html(t.MAC);u.find(".ontime").html(t.GetOnTimeFormatted);u.find(".actions a").attr("href",i.vm.toggleStateBaseURL+t.Name+"/"+f).addClass("btn-"+(t.State===i.vm.stateEnabed?"success":"danger"));u.removeClass("hidden");u.prependTo(r)})}).always(function(){i.block.isLoading("hide")})},refreshSites:function(t){t=typeof t=="undefined"?!1:t;t&&i.block.isLoading();n.getJSON("getSites",function(t){var r=i.block.find("#sites tbody");r.find("tr:not(.hidden)").remove();t.sort(function(n,t){return n.Name<t.Name?1:-1});n.each(t,function(n,t){var u=i.block.find("#sites tr.hidden").clone(),f=t.State===i.sites.stateEnabed?i.sites.stateDisabed:i.sites.stateEnabed;u.find(".name").html(t.Name);u.find(".actions a").attr("href",i.sites.toggleStateBaseURL+t.Name+"/"+f).addClass("btn-"+(t.State===i.sites.stateEnabed?"success":"danger"));u.removeClass("hidden");u.prependTo(r)})}).always(function(){i.block.isLoading("hide")})}};return r.initialize(),r};n(".hypervadmin").length&&n(".hypervadmin").hypervadmin()}(jQuery),function(n){n.fn.motion=function(t){var i=n.extend({block:this,baseUri:this.data("baseuri"),updateInterval:this.data("motion-interval")*1e3,updateIntervalId:-1},t),r={initialize:function(){if(i.block.length!==0){i.block.on("click",".fa-sync",function(){clearInterval(i.updateIntervalId);i.updateIntervalId=setInterval(function(){r.refreshImage();r.refreshModifiedTime()},i.updateInterval);r.refreshImage();r.refreshModifiedTime()});i.updateIntervalId=setInterval(function(){r.refreshImage();r.refreshModifiedTime()},i.updateInterval)}},refreshImage:function(){var n=i.block.find("a"),t=n.css("background-image"),r=t.split("?t=");n.css("background-image",r[0]+"?t="+Date.now()+'")')},refreshModifiedTime:function(){n.ajax({url:i.baseUri+"motion/modifiedTime",success:function(n){i.block.find(".subtitle").text(n)}})}};return r.initialize(),r}}(jQuery),function(n){n.fn.nowplaying=function(t){this.each(function(){var i=n.extend({block:n(this),updateInterval:n(this).data("nowplaying-intveral")*1e3,updateIntervalId:-1,subsonic:{loading:!1,url:n(this).data("subsonic-url"),password:n(this).data("subsonic-password"),username:n(this).data("subsonic-username"),timeout:5e3},kodi:{loading:!1,url:n(this).data("kodi-url"),urlJSON:n(this).data("kodi-url")+"/jsonrpc",password:n(this).data("kodi-password"),username:n(this).data("kodi-username"),timeout:5e3}},t),r={initialize:function(){i.block.find(".fa-sync").click(function(){r.nowPlaying()});i.block.find(".fa-chevron-left, .fa-chevron-right").click(function(){r.rotate(n(this).hasClass("fa-chevron-left")?"left":"right")});r.nowPlaying(!0)},nowPlaying:function(t){t=typeof t=="undefined"?!1:t;t||n(".nowplaying").isLoading();r.setInterval();i.block.find(".panel-heading button.fa-chevron-left, .panel-heading button.fa-chevron-right").addClass("disabled");i.block.find(".player.nothing-playing").hide();i.block.find(".player:not(.nothing-playing)").remove();r.subsonic.nowPlaying();r.kodi.nowPlaying();var u=window.setInterval(function(){t||i.kodi.loading!==!1||i.subsonic.loading!==!1||(n(".nowplaying").isLoading("hide"),clearInterval(u))},100)},nowPlayingCallback:function(){var n,t;i.kodi.loading===!1&&i.subsonic.loading===!1&&(n=i.block.find(".player:not(.nothing-playing)").length,n>0?i.block.find(".player.nothing-playing").hide():i.block.find(".player.nothing-playing").show(),n<=1?i.block.find(".panel-heading button.fa-chevron-left, .panel-heading button.fa-chevron-right").addClass("disabled"):i.block.find(".panel-heading button.fa-chevron-left, .panel-heading button.fa-chevron-right").removeClass("disabled"),t=i.block.find(".player:visible").hasClass("kodi")?"Kodi":"Subsonic",i.block.find("h4").html(t))},setInterval:function(){clearInterval(i.updateIntervalId);i.updateIntervalId=setInterval(function(){i.block.find(".player:not(.nothing-playing)").remove();r.subsonic.nowPlaying();r.kodi.nowPlaying()},i.updateInterval)},rotate:function(n){var t=i.block.find(".player:visible").index(),f=n==="right"?1:-1,r=1,u=i.block.find(".player:eq("+(t+f)+")");u.length!==1||u.hasClass("nothing-playing")?u.hasClass("nothing-playing")&&(r=i.block.find(".player").length-1):r=t+f;t!==r&&i.block.find(".player:eq("+t+")").fadeOut("fast",function(){i.block.find(".player:eq("+r+")").fadeIn("fast",function(){var n=i.block.find(".player:visible").hasClass("kodi")?"Kodi":"Subsonic";i.block.find("h4").html(n)}).css("display","block")})},createPlayer:function(t){var r=i.block.find(".player.nothing-playing").clone(),u=r.find("#nowplaying_detail").attr("id","nowplaying_detail_"+t.index);r.removeClass("nothing-playing");r.addClass(t.type);r.find(".item .image").css("background-image","url("+t.bgImage+")").parent().attr({title:n(this).attr("title"),href:"#nowplaying_detail_"+t.index});r.find(".title").html(t.title);r.find(".subtitle").html(t.subtitle);u.find("h4").html(t.title);u.find(".track").html(t.track);u.find(".album").html(t.album);u.find(".year").html(t.year);u.find(".genre").html(t.genre);u.find(".duration").html(t.duration);u.find(".bitrate").html(t.bitRate)+" kb/s";u.find(".playcount").html(t.playCount);u.find(".lastplayed").html(t.lastplayed+" minutes ago");i.block.find(".player:not(.nothing-playing):visible").length!==0?r.hide():r.show();r.appendTo(i.block.find(".panel-body"))},subsonic:{nowPlaying:function(){i.subsonic.loading=!0;n.ajax({url:r.subsonic.getURL("getNowPlaying"),timeout:i.subsonic.timeout,success:function(t){var i=n(t).find("entry");i.length!==0&&i.each(function(t){var i=r.subsonic.getURL("getCoverArt",{id:n(this).attr("coverArt")}),u=Math.floor(n(this).attr("duration")/60)+":"+n(this).attr("duration")%60;r.createPlayer({type:"subsonic",index:t,bgImage:i,title:n(this).attr("artist"),subtitle:n(this).attr("title"),track:n(this).attr("track"),album:n(this).attr("album"),genre:n(this).attr("genre"),duration:u,bitrate:n(this).attr("bitRate"),playCount:n(this).attr("playCount"),lastPlayed:n(this).attr("minutesAgo")})})},complete:function(){i.subsonic.loading=!1;r.nowPlayingCallback()}})},getSalt:function(){return Math.random().toString(36).substring(7)},getURL:function(t,u){var f=r.subsonic.getSalt(),o=md5(i.subsonic.password+f),e=i.subsonic.url+"rest/"+t+".view?u="+i.subsonic.username+"&t="+o+"&s="+f+"&v=1.14.0&c=chell";return n.each(u,function(n,t){e+="&"+n+"="+t}),e}},kodi:{nowPlaying:function(){i.kodi.loading=!0;var t=r.kodi.getPlayerId();typeof t!="undefined"&&n.ajax({url:i.kodi.urlJSON,type:"POST",async:!1,contentType:"application/json",data:JSON.stringify({id:"getnowplaying",jsonrpc:"2.0",method:"Player.GetItem",params:{properties:["title","showtitle","artist","thumbnail"],playerid:t}}),timeout:i.kodi.timeout,beforeSend:function(n){n.setRequestHeader("Authorization","Basic "+btoa(i.kodi.username+":"+i.kodi.password))},success:function(t){if(n.trim(t.result.item.title)!==""){var i=t.result.item.title,u="";typeof t.result.item.showtitle!="undefined"?i=t.result.item.showtitle:typeof t.result.item.artist!="undefined"&&(i=t.result.item.artist,u=t.result.item.title);r.createPlayer({type:"kodi",index:99,bgImage:r.kodi.getImage(t.result.item.thumbnail),title:i,subtitle:u})}}});i.kodi.loading=!1;r.nowPlayingCallback()},getPlayerId:function(){n.ajax({url:i.kodi.urlJSON,type:"POST",async:!1,contentType:"application/json",data:JSON.stringify({id:"activaplayers",jsonrpc:"2.0",method:"Player.GetActivePlayers"}),timeout:i.kodi.timeout,beforeSend:function(n){n.setRequestHeader("Authorization","Basic "+btoa(i.kodi.username+":"+i.kodi.password))},success:function(n){if(n.result[0])return n.result[0].playerid}})},getImage:function(t){n.ajax({url:i.kodi.urlJSON,type:"POST",async:!1,contentType:"application/json",data:JSON.stringify({id:"preparedl",jsonrpc:"2.0",method:"Files.PrepareDownload",params:{path:t}}),timeout:i.kodi.timeout,beforeSend:function(n){n.setRequestHeader("Authorization","Basic "+btoa(i.kodi.username+":"+i.kodi.password))},success:function(n){return i.kodi.url+"/"+n.result.details.path}})}}};return r.initialize(),r})}}(jQuery),function(n){n.fn.opcache=function(t){var i=n.extend({block:this,charts:[{name:"Memory",legendNames:["Used","Free","Wasted"],unitIndicator:"MB",active:!0},{name:"Keys",legendNames:["Cached","Free"],unitIndicator:!1,active:!1},{name:"Hits",legendNames:["Misses","Hits"],unitIndicator:!1,active:!1},{name:"Restarts",legendNames:["Memory","Manual","Keys"],unitIndicator:!1,active:!1},]},t),r={initialize:function(){if(i.block.length!==0){n.getJSON("opcache/dataset",function(n){i.charts[0].data=n.memory;i.charts[1].data=n.keys;i.charts[2].data=n.hits;i.charts[3].data=n.restarts;r.initializeChart(i.charts[0])});i.block.find(".fa-chevron-right, .fa-chevron-left").off().on("click",function(){var u=1,e=i.charts.find(function(n){return n.active===!0}),f=i.charts.indexOf(e),t;n(this).hasClass("fa-chevron-left")&&(u=-1);t=f+u;t>=i.charts.length?t=0:t<0&&(t=i.charts.length-1);i.charts[f].active=!1;i.charts[t].active=!0;i.block.find(".panel-body h4").text(i.charts[t].name);r.initializeChart(i.charts[t])})}},initializeChart:function(n){typeof n=="undefined"&&(n=i.charts[0]);var t=new Chartist.Pie(".panel.opcache .graph",{series:n.data},{donut:!0,donutWidth:30,showLabel:!0,plugins:[Chartist.plugins.legend({position:"bottom",legendNames:n.legendNames})],labelInterpolationFnc:function(t){return t+(n.unitIndicator?" "+n.unitIndicator:"")}});t.on("draw",r.animateChart);t.on("created",function(){setTimeout(function(){i.block.find(".ct-label ").fadeTo("fast",1)},1e3)})},animateChart:function(n){var t,i;n.type==="slice"&&(t=n.element._node.getTotalLength(),n.element.attr({"stroke-dasharray":t+"px "+t+"px"}),i={"stroke-dashoffset":{id:"anim"+n.index,dur:750,from:-t+"px",to:"0px",easing:Chartist.Svg.Easing.easeOutQuint,fill:"freeze"}},n.index!==0&&(i["stroke-dashoffset"].begin="anim"+(n.index-1)+".end"),n.element.attr({"stroke-dashoffset":-t+"px"}),n.element.animate(i,!1))}};return r.initialize(),r}}(jQuery),function(n){n.fn.phpsysinfo=function(t){this.each(function(){var i=n.extend({url:n(this).data("phpsysinfo-url"),block:n(this)},t),r={initialize:function(){i.block.find(".fa-sync").off().on("click",function(){i.block.hasClass("processes")?r.psstatus():r.getAll()})},getAll:function(){n(".sysinfo, #hardware, .harddisks").isLoading();var t=new Date;n.ajax({url:i.url+"xml.php?json&"+t.getTime(),dataType:"json",beforeSend:function(n){n.setRequestHeader("Authorization","Basic "+btoa(i.block.data("phpsysinfo-username")+":"+i.block.data("phpsysinfo-password")))},success:function(n){r.setSysinfo(n);r.setCPUCores(n);r.setNetwork(n);r.setRAM(n);r.setDisks(n);r.setUpdateNotifier(n)},complete:function(){n(".sysinfo, #hardware, .harddisks").isLoading("hide")}})},setSysinfo:function(t){n("div.host").html(t.Vitals["@attributes"].Hostname);n("div.distro span").html(t.Vitals["@attributes"].Distro);n("div.distro div.icon").css("background-image","url('"+i.url+"gfx/images/"+t.Vitals["@attributes"].Distroicon+"')");n("div.kernel").html(t.Vitals["@attributes"].Kernel);n(".cpu-model-label").html(t.Hardware.CPU.CpuCore[0]["@attributes"].Model);n("div.motherboard").html(t.Hardware["@attributes"].Name);var r=new Date;r.setSeconds(r.getSeconds()-Math.floor(t.Vitals["@attributes"].Uptime));n("div.uptime").data("tinyTimer")!==undefined&&clearInterval(n("div.uptime").data("tinyTimer").interval);n("div.uptime").tinyTimer({from:r,format:"%d days %0h:%0m:%0s"})},setCPUCores:function(t){n.each(t.Hardware.CPU.CpuCore,function(i,r){var o=Math.round(r["@attributes"].CpuSpeed/10)/100+" GHz",s=Math.round(r["@attributes"].CpuSpeedMin/10)/100+" GHz",h=Math.round(r["@attributes"].CpuSpeedMax/10)/100+" GHz",f,e,u;n.each(t.MBInfo.Temperature.Item,function(r,u){n.trim(u["@attributes"].Label.toLowerCase())==="core "+i&&(f=u["@attributes"].Label,e=u["@attributes"].Value+" &deg;"+t.Options["@attributes"].tempFormat.toUpperCase())});u=n("li.cpu-cores:eq("+i+")");u.find(".cpu-core").html(f);u.find(".core-temp").html(e);u.find(".core-current").html(o);u.find(".core-min").html(s);u.find(".core-max").html(h)})},setNetwork:function(t){n.isArray(t.Network.NetDevice)||(t.Network.NetDevice=new Array(t.Network.NetDevice));n.each(t.Network.NetDevice,function(t,i){if(typeof i["@attributes"]!="undefined"){var f=Math.round(i["@attributes"].RxBytes/1073741824*100)/100+" GB",e=Math.round(i["@attributes"].TxBytes/1073741824*100)/100+" GB",u=i["@attributes"].Info.split(";"),r=n(".lan-stats div:eq("+t+")");r.find(".lan-name").html(i.Name);r.find(".lan-mac").html(u[0]);r.find(".lan-ip").html(u[1]);r.find(".lan-speed").html(u[u.length-1]);r.find(".lan-rx").html(f);r.find(".lan-tx").html(e)}})},setRAM:function(t){n("div.ram").find(".progress-bar").css("width",t.Memory["@attributes"].Percent+"%");n("div.ram").find(".percent span").html(t.Memory["@attributes"].Percent);t.Memory.Swap!==undefined?(n("div.swap").find(".progress-bar").css("width",t.Memory.Swap["@attributes"].Percent+"%"),n("div.swap").find(".percent span").html(t.Memory.Swap["@attributes"].Percent)):n("div.swap").closest("li").hide()},setDisks:function(t){t.FileSystem.Mount.sort(function(n,t){return n["@attributes"].MountPoint<t["@attributes"].MountPoint?-1:1});n.each(t.FileSystem.Mount,function(t,i){var r=n(".harddisks li:eq("+t+")"),u=i["@attributes"].Percent+"%";r.find(".name").html(i["@attributes"].MountPoint);r.find(".progress-bar").css("width",u);r.find(".percent").html(u);i["@attributes"].Percent>90?r.find(".progress-bar").addClass("progress-bar-danger"):i["@attributes"].Percent>70?r.find(".progress-bar").addClass("progress-bar-warning"):i["@attributes"].Percent>50?r.find(".progress-bar").addClass("progress-bar-info"):r.find(".progress-bar").addClass("progress-bar-success")})},setUpdateNotifier:function(n){n.Plugins.Plugin_UpdateNotifier!==undefined&&(i.block.find("span.packages").html("Packages:"+n.Plugins.Plugin_UpdateNotifier.UpdateNotifier.packages),i.block.find("span.security").html("Security:"+n.Plugins.Plugin_UpdateNotifier.UpdateNotifier.security))},psstatus:function(){n(".processes").isLoading();i.block.find(".fa-sync").off().on("click",r.psstatus);var t=new Date;n.ajax({url:i.url+"xml.php?plugin=psstatus&json&"+t.getTime(),dataType:"json",beforeSend:function(n){n.setRequestHeader("Authorization","Basic "+btoa(i.block.data("phpsysinfo-username")+":"+i.block.data("phpsysinfo-password")))},success:function(t){t.Plugins.Plugin_PSStatus.Process.sort(function(n,t){return n["@attributes"].Name<t["@attributes"].Name?-1:1});n.each(t.Plugins.Plugin_PSStatus.Process,function(t,i){var u=n("<li />",{"class":"list-group-item col-xs-12 col-md-12"}),f=n("<div />",{"class":"col-xs-10"}),e=n("<div />",{"class":"col-xs-2 text-right"}),r=n("<span />",{"class":"label"});f.html(i["@attributes"].Name);f.appendTo(u);i["@attributes"].Status==="1"?(r.html("On"),r.addClass("label-success")):(r.html("Off"),r.addClass("label-danger"));r.appendTo(e);e.appendTo(u);n("div.processes li div:contains('"+i["@attributes"].Name+"')").parent().remove();u.appendTo(n("div.processes ul"))})},complete:function(){n(".processes").isLoading("hide")}})}};return r.initialize(),r})}}(jQuery),function(n){n.fn.pihole=function(t){var i=n.extend({block:this,url:n(this).data("pihole-url"),charts:[{name:"Queries today",legendNames:["Cached","Not cached","Blocked"],active:!0},]},t),r={initialize:function(){if(i.block.length!==0){i.block.on("click",".fa-sync",function(){r.refresh()});r.refresh()}},refresh:function(){n.getJSON(i.url+"api.php?summaryRaw",function(n){i.charts[0].data=[n.queries_cached,n.dns_queries_today-n.queries_cached,n.ads_blocked_today];r.initializeChart(i.charts[0])})},initializeChart:function(n){typeof n=="undefined"&&(n=i.charts[0]);var t=new Chartist.Pie(".panel.pihole .graph",{series:n.data},{donut:!0,donutWidth:30,showLabel:!0,plugins:[Chartist.plugins.legend({position:"bottom",legendNames:n.legendNames})],labelInterpolationFnc:function(t){return t+(n.unitIndicator?" "+n.unitIndicator:"")}});t.on("draw",r.animateChart);t.on("created",function(){setTimeout(function(){i.block.find(".ct-label ").fadeTo("fast",1)},1e3)})},animateChart:function(n){var t,i;n.type==="slice"&&(t=n.element._node.getTotalLength(),n.element.attr({"stroke-dasharray":t+"px "+t+"px"}),i={"stroke-dashoffset":{id:"anim"+n.index,dur:750,from:-t+"px",to:"0px",easing:Chartist.Svg.Easing.easeOutQuint,fill:"freeze"}},n.index!==0&&(i["stroke-dashoffset"].begin="anim"+(n.index-1)+".end"),n.element.attr({"stroke-dashoffset":-t+"px"}),n.element.animate(i,!1))}};return r.initialize(),r}}(jQuery),function(n){n.fn.sickrage=function(t){var i=n.extend({block:this,apiKey:this.data("sickrage-apikey"),baseUrl:this.data("sickrage-url")},t),r={initialize:function(){if(i.block.length!==0){i.block.find(".fa-sync").on("click",function(){r.refresh()});r.refresh(!0)}},refresh:function(t){t||i.block.isLoading();var u=i.block.find("#today .list-group"),f=i.block.find("#soon .list-group");n.ajax({url:r.url("future","today|soon"),dataType:"json",success:function(t){t=t.data;u.find("a:not(.hidden)").remove();f.find("a:not(.hidden)").remove();n.each(t.today,function(n,t){r.createItems(u,t)});n.each(t.soon,function(n,t){r.createItems(f,t)})},complete:function(){t||i.block.isLoading("hide");u.find(".list-group-item:not(.hidden)").length?i.block.find("a:eq(0)").attr("data-toggle","tab"):(i.block.find("a[href='#soon']").tab("show"),i.block.find("a[href='#today']").parent().addClass("disabled"),i.block.find("a[href='#today']").attr("data-toggle",""))}})},createItems:function(t,r){var f=t.find("a.hidden").clone(),s=f.find(".episode"),u=i.block.find(".sickrage-detail").clone(),e="S"+zeropad(r.season,2)+"E"+zeropad(r.episode,2),o="t"+r.tvdbid+"-"+e;s.html(e+" | "+r.show_name);u.attr("data-fancybox",t.attr("id"));u.attr("id",o);u.find("h4").html(r.show_name);u.find(".plot").html(r.ep_plot);u.find(".season").html(zeropad(r.season,2));u.find(".episode").html(zeropad(r.episode,2));u.find(".episodename").html(r.ep_name);u.find(".airdate").html(r.airdate);f.on("click",function(){return n.fancybox.open({src:"#"+o,margin:[0]}),!1});u.appendTo(f);f.removeClass("hidden");f.prependTo(t)},url:function(n,t){return i.baseUrl+"api/"+i.apiKey+"/?cmd="+n+"&type="+t}};r.initialize()}}(jQuery),function(n){n.fn.speedtest=function(t){var i=n.extend({block:this,testOrder:this.data("speedtest-testorder"),uploadTime:this.data("speedtest-uploadtime"),downloadTime:this.data("speedtest-downloadtime"),getISPIP:this.data("speedtest-getispip"),distanceUnit:this.data("speedtest-distance"),telemetry:this.data("speedtest-telemetry"),animationFrameId:-1,colors:{meterBk:"#E0E0E0",dlColor:"#6060AA",ulColor:"#309030",pingColor:"#AA6060",jitColor:"#AA6060",progColor:"#EEEEEE"}},t),f=null,u=null,r={initialize:function(){if(i.block.length!==0){i.block.find(".fa-play, .fa-stop").on("click",function(){n(this).toggleClass("fa-play fa-stop");r.startStop()});i.block.find("h4").click(function(){i.block.find(".panel-body").is(":visible")&&r.initUI()});window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(n){setTimeout(n,1e3/60)};setTimeout(r.initUI,100)}},initializeIframe:function(){var t=i.block.closest(".panel.with-nav-tabs"),r=new Chartist.Bar("#ct-chart",{labels:i.block.data("labels").toString().indexOf(",")!=-1?i.block.data("labels").split(","):[i.block.data("labels")],series:[i.block.data("dl").toString().indexOf(",")!=-1?i.block.data("dl").split(","):[i.block.data("dl")],i.block.data("ul").toString().indexOf(",")!=-1?i.block.data("ul").split(","):[i.block.data("ul")],i.block.data("ping").toString().indexOf(",")!=-1?i.block.data("ping").split(","):[i.block.data("ping")],i.block.data("jitter").toString().indexOf(",")!=-1?i.block.data("jitter").split(","):[i.block.data("jitter")]]},{horizontalBars:!0,height:"650px",plugins:[Chartist.plugins.legend({legendNames:["Download","Upload","Ping","Jitter"]})]});t.find(".nav-tabs a").click(function(){setTimeout(function(){r.update()},250)});t.find(".paginator a").click(function(){n(this).attr("href",n(this).attr("href")+"/"+t.find(".nav-tabs li.active a").attr("href").replace("#",""))})},drawMeter:function(n,t,i,r,u,f){var e=n.getContext("2d"),c=window.devicePixelRatio||1,h=n.clientWidth*c,s=n.clientHeight*c,o=s*.0055;n.width==h&&n.height==s?e.clearRect(0,0,h,s):(n.width=h,n.height=s);e.beginPath();e.strokeStyle=i;e.lineWidth=16*o;e.arc(n.width/2,n.height-58*o,Math.abs(n.height/1.8-e.lineWidth),-Math.PI*1.1,Math.PI*.1);e.stroke();e.beginPath();e.strokeStyle=r;e.lineWidth=16*o;e.arc(n.width/2,n.height-58*o,Math.abs(n.height/1.8-e.lineWidth),-Math.PI*1.1,t*Math.PI*1.2-Math.PI*1.1);e.stroke();typeof u!="undefined"&&(e.fillStyle=f,e.fillRect(n.width*.3,n.height-16*o,n.width*.4*u,4*o))},startStop:function(){f!=null?(f.postMessage("abort"),f=null,u=null,cancelAnimationFrame(i.animationFrameId),r.initUI()):(r.frame(),f=new Worker("js/vendor/speedtest/speedtest_worker.min.js?t="+Date.now()),f.postMessage("start "+JSON.stringify({url_dl:"../../../speedtest/garbage",url_ul:"../../../speedtest/empty",url_ping:"../../../speedtest/empty",url_getIp:"../../../speedtest/getIP",url_telemetry:"../../../speedtest/telemetry",telemetry_level:i.telemetry,time_ul_max:i.uploadTime,time_dl_max:i.downloadTime,time_auto:!1,getIp_ispInfo:i.getISPIP,getIp_ispInfo_distance:i.distanceUnit})),f.onmessage=function(n){u=JSON.parse(n.data);u.testState>=4&&(f=null,r.updateUI(!0),cancelAnimationFrame(i.animationFrameId),i.block.find(".fa-play, .fa-stop").removeClass("fa-stop").addClass("fa-play"))})},mbpsToAmount:function(n){return 1-1/Math.pow(1.3,Math.sqrt(n))},msToAmount:function(n){return 1-1/Math.pow(1.08,Math.sqrt(n))},oscillate:function(){return 1+.02*Math.sin(Date.now()/100)},initUI:function(){r.drawMeter(n("#dlMeter")[0],0,i.colors.meterBk,i.colors.dlColor,0);r.drawMeter(n("#ulMeter")[0],0,i.colors.meterBk,i.colors.ulColor,0);r.drawMeter(n("#pingMeter")[0],0,i.colors.meterBk,i.colors.pingColor,0);r.drawMeter(n("#jitMeter")[0],0,i.colors.meterBk,i.colors.jitColor,0);n("#dlText").textContent="";n("#ulText").textContent="";n("#pingText").textContent="";n("#jitText").textContent="";n("#ip").textContent=""},frame:function(){i.animationFrameId=requestAnimationFrame(r.frame);r.updateUI()},updateUI:function(t){if(f&&f.postMessage("status"),u||t){var e=u.testState;n("#ip").text(u.clientIp);n("#dlText").text(e==1&&u.dlStatus==0?"...":u.dlStatus);r.drawMeter(n("#dlMeter")[0],r.mbpsToAmount(Number(u.dlStatus*(e==1?r.oscillate():1))),i.colors.meterBk,i.colors.dlColor,Number(u.dlProgress),i.colors.progColor);n("#ulText").text(e==3&&u.ulStatus==0?"...":u.ulStatus);r.drawMeter(n("#ulMeter")[0],r.mbpsToAmount(Number(u.ulStatus*(e==3?r.oscillate():1))),i.colors.meterBk,i.colors.ulColor,Number(u.ulProgress),i.colors.progColor);n("#pingText").text(u.pingStatus);r.drawMeter(n("#pingMeter")[0],r.msToAmount(Number(u.pingStatus*(e==2?r.oscillate():1))),i.colors.meterBk,i.colors.pingColor,Number(u.pingProgress),i.colors.progColor);n("#jitText").text(u.jitterStatus);r.drawMeter(n("#jitMeter")[0],r.msToAmount(Number(u.jitterStatus*(e==2?r.oscillate():1))),i.colors.meterBk,i.colors.jitColor,Number(u.pingProgress),i.colors.progColor)}}};return n("body#iframe").length||r.initialize(),r};n("#ct-chart").length&&n("#ct-chart").speedtest().initializeIframe()}(jQuery),function(n){n.fn.transmission=function(t){var i=n.extend({defaultData:{type:"POST",beforeSend:function(n){n.setRequestHeader("Authorization","Basic "+btoa(i.block.data("transmission-username")+":"+i.block.data("transmission-password")));n.setRequestHeader("X-Transmission-Session-Id",i.transmissionSessionId)},statusCode:{409:function(n){i.transmissionSessionId=n.getResponseHeader("X-Transmission-Session-Id")}},url:this.data("transmission-url")+"rpc/"},block:this,transmissionSessionId:-1,updateInterval:this.data("transmission-update-interval")*1e3,updateIntervalId:-1},t),r={getTorrents:function(t){t=typeof t=="undefined"?!1:t;t||i.block.isLoading();clearInterval(i.updateIntervalId);i.updateIntervalId=setInterval(function(){r.getTorrents(!1)},i.updateInterval);i.block.find(".fa-sync").off().on("click",function(){r.getTorrents(!1);n(this).blur()});var u=i.defaultData;return u.data='{"method":"torrent-get", "arguments":{"fields":["id", "name", "percentDone", "status"]}}',u.complete=function(u){var e,f;if(u.status===200)e=n.parseJSON(u.responseText),i.block.find("li").not(".hidden").remove(),e.arguments.torrents.length===0&&(f=i.block.find("li.hidden").clone(),f.removeClass("hidden"),f.find(".torrentname").html("No torrents found"),f.find(".torrentname").removeClass("col-xs-4"),f.find(".torrentprogress, .torrentactions").remove(),f.appendTo(n(".transmission ul"))),n.each(e.arguments.torrents,function(t,u){var f=i.block.find("li.hidden").clone();f.attr("data-id",u.id);f.removeClass("hidden");f.find(".torrentname").html(u.name);f.find(".torrentname").attr("title",u.name);u.percentDone=Math.round(u.percentDone*1e4)/100;f.find(".torrentprogress .percent").html(u.percentDone+"%");f.find(".torrentprogress .progress-bar").width(u.percentDone+"%");u.status===4?(f.find(".torrentactions .status").removeClass("fa-play"),f.find(".torrentactions .status").addClass("fa-pause")):u.status===0&&(f.find(".torrentactions .status").removeClass("fa-pause"),f.find(".progress-bar").removeClass("progress-bar-success").addClass("progress-bar-primary"),f.find(".torrentactions .status").addClass("fa-play"));f.find(".torrentactions .status").off().on("click",function(){self.startStopTorrents(n(this).closest("li").data("id"),self)});f.find(".torrentactions .fa-trash-alt").off().on("click",function(){openConfirmDialog("Delete torrent?",[],function(){n.fancybox.close();n(this).attr("id")==="confirm-yes"&&r.removeTorrents(f.data("id"))})});f.appendTo(n(".transmission ul"))});else if(u.status===409){t||i.block.isLoading("hide");r.getTorrents(t);return}t||i.block.isLoading("hide")},n.ajax(u),self},startStopTorrents:function(t){var u=i.defaultData;u.data='{"method":"torrent-'+(n("li[data-id="+t+"] button.status:first-child").hasClass("fa-pause")?"stop":"start-now")+'", "arguments":{"ids":['+t+"]}}";u.complete=function(i){if(i.status===409)r.startTorrents(t);else if(i.status===200){var u=n.parseJSON(i.responseText);u.result==="success"&&(n("li[data-id="+t+"] button.status").toggleClass("fa-pause fa-play"),n("li[data-id="+t+"] .progress-bar").toggleClass("progress-bar-success progress-bar-primary"))}};n.ajax(u)},removeTorrents:function(t){var u=i.defaultData;u.data='{"method":"torrent-remove", "arguments":{"ids":['+t+']}, "delete-local-data": true}';u.complete=function(i){if(i.status===409)r.removeTorrents(t);else if(i.status===200){var u=n.parseJSON(i.responseText);u.result==="success"&&(n("li[data-id="+t+"]").remove(),r.getTorrents(!1))}};n.ajax(u)}};return i.block.length!==0&&r.getTorrents(!0),r}}(jQuery),function(n){n.fn.youless=function(t){var i=n.extend({block:this,updateInterval:this.data("updateinterval")*1e3,updateIntervalId:-1},t),r={initialize:function(){if(i.block.length!==0){i.block.on("click",".fa-sync",function(){clearInterval(i.updateIntervalId);i.updateIntervalId=setInterval(function(){r.refresh()},i.updateInterval);r.refresh()});i.updateIntervalId=setInterval(function(){r.refresh()},i.updateInterval)}},refresh:function(){i.block.isLoading();n.ajax({url:"youless/",dataType:"json",success:function(n){i.block.find(".value").text(n.power);i.block.find(".power").attr("class","power "+n.class)},complete:function(){i.block.isLoading("hide")}})}};return r.initialize(),r}}(jQuery);"use strict";var speedtest=!1,opache=!1,pihole=!1;$(function(){initializeDashboardEventHandlers();initializePlugins();$("html").hasClass("time")&&getLocation()});
//# sourceMappingURL=dashboard.min.js.map