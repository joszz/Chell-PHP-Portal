"use strict";(function(n){n.fn.couchpotato=function(t){var i=n.extend({block:this,apiKey:this.data("couchpotato-apikey"),baseUrl:this.data("couchpotato-url")},t),r={initialize:function(){i.block.find(".fa-refresh").on("click",function(){r.refresh(!1)});i.block.find(".fa-search").on("click",r.searchWantedMovies);r.refresh(!0)},refresh:function(t){t||(i.block.isLoading(),i.block.find(".item").remove());n.ajax({url:r.url("media.list"),dataType:"json",success:function(t){n.each(t.movies,function(n,t){var r=i.block.find("a.clone").clone();r.removeClass("clone").addClass("item");n===0&&r.removeClass("hidden_not_important");r.find(".title").html(t.title);r.find(".subtitle").html(t.info.tagline);r.css("background-image","url('"+t.info.images.poster+"')");r.attr("title",t.title);r.prependTo(i.block.find(".panel-body"))})},complete:function(){t||i.block.isLoading("hide")}})},searchWantedMovies:function(){showAlert("success","Initiating Couchpotato movie search");n.ajax({url:r.url("movie.searcher.full_search"),dataType:"json"})},url:function(n){return i.baseUrl+"api/"+i.apiKey+"/"+n+"/"}};r.initialize()}})(jQuery);