"use strict";function webauthAuthCallback(n,t){n&&($("input[name=webauth]").val(t),$("form").attr("action","/portal/session/webauthauthenticate").submit())}function webauthnAuthenticate(n,t){var i=JSON.parse(n),r=i.challenge;i.challenge=new Uint8Array(i.challenge);i.allowCredentials.forEach(function(n,t){i.allowCredentials[t].id=new Uint8Array(n.id)});navigator.credentials.get({publicKey:i}).then(function(n){var e=[],o,i,u,f,s;new Uint8Array(n.rawId).forEach(function(n){e.push(n)});o=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(n.response.clientDataJSON)));i=[];new Uint8Array(n.response.clientDataJSON).forEach(function(n){i.push(n)});u=[];new Uint8Array(n.response.authenticatorData).forEach(function(n){u.push(n)});f=[];new Uint8Array(n.response.signature).forEach(function(n){f.push(n)});s={type:n.type,originalChallenge:r,rawId:e,response:{authenticatorData:u,clientData:o,clientDataJSONarray:i,signature:f}};t(!0,JSON.stringify(s))}).catch(function(n){"name"in n&&(n.name=="AbortError"||n.name=="NS_ERROR_ABORT"||n.name=="NotAllowedError")?t(!1,"abort"):t(!1,n.toString())})}$(function(){var n=!1;$("#webauth").on("click",function(){$("#password-group, #rememberme-wrapper").toggle();n=!n});if($("#duo_iframe").length){$(window).on("beforeunload",function(){$("body").isLoading()});$("#duo_iframe").on("load",function(){$(this).fadeIn()})}$("button[type=submit]").on("click",function(){if(n)return $.ajax({type:"POST",url:"/portal/session/webauthchallenge",data:{username:$("#username").val()},dataType:"json",success:function(n){webauthnAuthenticate(n,webauthAuthCallback)}}),!1})});