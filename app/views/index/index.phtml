<?php /** @var Phalcon\Mvc\View $this */ ?>
<?php
$columnCountSm = 0;
$columnCountMd = 0;
?>

<?php if (count($widgets) == 0) : ?>
<h1 class="text-center">
    <a href="settings" class="text-warning">No widgets enabled, go to the settings to set them up!</a>
</h1>
<?php else : ?>
<?php 
foreach ($widgets as $widget) :
    $widget->calculateColumnCounts($columnCountSm, $columnCountMd);
?>
<div class="<?php echo $widget->getClass() ?>">
    <?php $this->partial('index/partials/' . $widget->viewFileName); ?>
</div>

<?php if($columnCountSm % 12 == 0 || $columnCountMd % 12 == 0) : ?>
<div class="clearfix <?php echo ($columnCountSm % 12 == 0 ? 'visible-sm ' : null) . ($columnCountMd % 12 == 0 ? 'visible-md visible-lg' : null) ?>"></div>
<?php endif ?>

<?php endforeach ?>
<?php endif ?>